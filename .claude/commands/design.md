**Purpose**: Technical architecture and system design

---

@include shared/universal-constants.yml#Universal_Legend

## Command Execution
Execute: immediate. --planâ†’show plan first
Legend: Generated based on symbols used in command
Purpose: "[Action][Subject] in $ARGUMENTS"

Design technical architecture, APIs, and system components for $ARGUMENTS.

@include shared/flag-inheritance.yml#Universal_Always

Examples:
- `/design --api --sequential` - REST API design with strategic analysis
- `/design --architecture --think-hard` - Deep system architecture design
- `/design --database --motherduck` - Database schema design with analysis
- `/design --documentation --context7` - Documentation architecture with standards

Design modes:

**--api:** Design REST, GraphQL, or RPC APIs
- OpenAPI/Swagger specification generation
- Authentication and authorization patterns
- Rate limiting and error handling strategies
- API versioning and backward compatibility
- Performance optimization and caching

**--architecture:** System architecture and design patterns
- Microservices vs monolithic architecture
- Component interaction and communication patterns
- Data flow and processing pipelines
- Scalability and performance considerations
- Security and compliance requirements

**--database:** Database schema and data modeling
- Relational database design and normalization
- NoSQL data modeling and document structures
- Index optimization and query performance
- Data migration and versioning strategies
- Backup and recovery planning

**--documentation:** Documentation architecture and organization
- Information architecture and content structure
- User journey and navigation design
- Content templates and style guides
- Search and discovery optimization
- Accessibility and inclusive design

**--security:** Security architecture and protocols
- Authentication and authorization systems
- Data encryption and protection strategies
- Network security and communication protocols
- Vulnerability assessment and threat modeling
- Compliance and regulatory requirements

**--performance:** Performance optimization and monitoring
- System bottleneck identification and resolution
- Caching strategies and optimization
- Load balancing and scalability planning
- Monitoring and observability implementation
- Performance testing and benchmarking

## MCP Integration Patterns

**Sequential Integration:**
- Complex architectural analysis and planning
- Multi-step design process optimization
- Strategic technical decision making
- System design pattern evaluation

**MotherDuck Integration:**
- Database schema analysis and optimization
- Performance metrics and query optimization
- Data modeling and relationship analysis
- System performance benchmarking

**Context7 Integration:**
- Documentation architecture and standards
- Technical writing best practices
- Content organization and structure
- Knowledge management systems

**Puppeteer Integration:**
- User interface design validation
- Documentation usability testing
- Performance testing and optimization
- Accessibility compliance verification

## Technical Writer Persona Activation

Auto-activates technical writer persona with focus on:
- Clear and comprehensive design documentation
- Technical accuracy and implementation details
- User-focused design explanations
- Accessibility and inclusive design principles

## Design Patterns and Best Practices

**API Design Patterns:**
- RESTful resource design and HTTP methods
- GraphQL schema design and resolver patterns
- Authentication and authorization patterns (OAuth, JWT)
- Rate limiting and throttling strategies
- Error handling and status code conventions
- API versioning and deprecation strategies

**Architecture Patterns:**
- Microservices architecture and service boundaries
- Event-driven architecture and message patterns
- CQRS and event sourcing patterns
- Hexagonal architecture and dependency inversion
- Circuit breaker and retry patterns
- Saga patterns for distributed transactions

**Database Design Patterns:**
- Domain-driven design and bounded contexts
- Entity-relationship modeling and normalization
- Command Query Responsibility Segregation (CQRS)
- Repository and Unit of Work patterns
- Data access layer abstraction patterns
- Database migration and versioning strategies

**Documentation Patterns:**
- Information architecture and content hierarchy
- Progressive disclosure and layered documentation
- Code example integration and validation
- Interactive documentation and API explorers
- Multi-format publishing and content reuse
- Search optimization and content discovery

## Quality Assurance

All designs include:
- **Technical Accuracy**: Implementation feasibility and best practices
- **Scalability Considerations**: Performance and growth planning
- **Security Review**: Threat modeling and vulnerability assessment
- **Accessibility Compliance**: Inclusive design and WCAG guidelines
- **Documentation Quality**: Clear explanations and implementation guides
- **Testing Strategy**: Validation and quality assurance planning

## Design Outputs

**API Specifications:**
- OpenAPI/Swagger documentation
- GraphQL schema definitions
- Authentication and authorization flows
- Error handling and status codes
- Rate limiting and usage policies
- SDK and client library specifications

**Architecture Documentation:**
- System architecture diagrams
- Component interaction flows
- Data flow and processing pipelines
- Deployment and infrastructure requirements
- Security and compliance protocols
- Performance and scalability specifications

**Database Designs:**
- Entity-relationship diagrams
- Schema definitions and constraints
- Index optimization strategies
- Migration scripts and procedures
- Backup and recovery plans
- Performance monitoring and optimization

**Documentation Architecture:**
- Information architecture and site maps
- Content templates and style guides
- User journey and navigation flows
- Search and discovery optimization
- Accessibility and inclusive design
- Content management and publishing workflows